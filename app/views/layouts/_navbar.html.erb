<nav class="navbar navbar-expand-md sticky-top" >
    <div class="container-fluid">
        <div class="navbar-brand d-flex align-items-center gap-3">
            <%= link_to root_path, class: "d-flex align-items-center gap-3" do %>
                <%= image_tag "logo.png", alt: "Fotobook logo" %>
                <!-- changed when admin login-->
                <span>
                    <%= user_signed_in? && current_user.is_admin? ? t('nav.admin') : t('nav.app_name') %>
                </span>
            <% end %>
            <div class="lang-switcher">
                <% other_locale = (I18n.locale == :en) ? :vi : :en %>
                <%= link_to url_for(locale: other_locale), title: t('message.switch_lang'),
                     data: { turbo: false } do  %> <!-- force full page reload because Turbo behaves similiar to AJAX-->
                    <%= image_tag "#{I18n.locale == :en ? 'en' : 'vi'}.png", alt: "#{I18n.locale == :en ? 'English' : 'Vietnamese'} flag", class: "lang-icon" %>
                <% end %> 
            </div>
        </div>
            
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbar" data-navbar-target="collapse">
            <!-- TODO: SEARCH BAR (press enter to submit)-->
            <form class="searchbar mb-3 mb-lg-0">
                <input class="form-control" type="text" placeholder="Search Photo / Album">
            </form>
            <!--  VIEW AUTHOURIZATION-->
            <ul class="navbar-nav ms-auto gap-3 align-items-center justify-content-start"> <!-- push these elements to the right-->  
                <%unless user_signed_in?%>
                    <li class="nav-item btn-group">
                        <%= link_to login_path, class: "btn login-btn" do %>
                            <%= t('button.login') %>
                        <% end %>
                        <%= link_to signup_path, class: "btn marked-btn" do %>
                            <i class="fa-solid fa-right-to-bracket"></i>
                            <%= t('button.signup') %>
                        <% end %>
                    </li>

                <%else%>
                    <li class="nav-item d-flex align-items-center ms-2 profile">
                        <%= link_to current_user.is_admin ? edit_user_registration_path : index_user_photos_path(current_user), 
                            class: "navbar-name-container d-flex align-items-center flex-grow-1", title: t('button.edit_profile') do %>
                            <%= image_tag current_user.get_avatar, alt: "Profile Avatar", class: "avatar" %>
                            <span><%= formatted_name(current_user) %></span>
                        <% end %>
                    </li>
                    <li>
                    <%= link_to destroy_user_session_path, data: { turbo_method: :delete }, class: "ms-2 btn marked-btn" do %>
                        <i class="fa-solid fa-right-from-bracket"></i>
                        <%= t('button.logout') %>
                    <%end %>
                    </li>
                <%end%>

                
            </ul>

        </div>
    </div>

</nav>