<% content_for :title, "Reset Password" %>

<div class="auth-form-container d-flex">
<section class="card m-auto d-flex flex-column">
    <h1 class="card-header text-center"><%= t('profile.forgot_pw') %></h1>
    <div class="card-body d-flex align-items-center justify-content-center flex-column">

      <%= form_with model: resource, scope: resource_name, url: password_path(resource_name), html: { method: :put }, local: true do |f| %>
          <%= f.hidden_field :reset_password_token %>
          
            <div class="row mb-3">
                <%= f.label :password, class: "col-form-label col-7 col-md-5" do %>
                    <%= t('profile.new_pw') %><span class="text-danger"> *</span>
                <% end %>
                <div class="pw-field col-10 col-md-8 p-0" data-controller="form">
                    <%= f.password_field :password, placeholder:"#{t('profile.pw')} #{t('profile.max_field', num: 64)}", maxlength: 64, autocomplete: "new-password",
                        data:{form_target: "pwField"}, required: true, autofocus: true  %>
                    <i class="fa-solid fa-eye togglePw" data-form-target="eyeIcon" data-action="click->form#togglePw"></i>
                </div>
            </div>
            <% if f.object.errors[:password].any? %>
                <p class="error row mb-3 ms-4">
                    <%= f.object.errors[:password].map { |msg| "#{t('profile.pw')} #{msg}" }.join("<br>").html_safe %> ❗
                </p>
            <%end%>
            
            <div class="row mb-3">
                <%= f.label :password_confirmation, class: "col-form-label col-7 col-md-5" do %>
                    <%= t('profile.pw_confirmation') %><span class="text-danger"> *</span>
                <% end %>
                <div class="pw-field col-10 col-md-8 p-0" data-controller="form">
                    <%= f.password_field :password_confirmation, placeholder: t('profile.pw_confirmation'), maxlength: 64, autocomplete: "new-password",
                        data:{form_target: "pwField"}, required: true %>
                    <i class="fa-solid fa-eye togglePw" data-form-target="eyeIcon" data-action="click->form#togglePw"></i>
                </div>
            </div>
            <% if f.object.errors[:password_confirmation].any? %>
                <p class="error row mb-3 ms-4">
                    <%= f.object.errors[:password_confirmation].map { |msg| "#{t('profile.pw_confirmation')} #{msg}" }.join("<br>").html_safe %> ❗
                </p>
            <%end%>

          <%= f.submit t('profile.change_pw'), class: "m-auto mt-1 custom-primary-btn" %>
      <% end %>

      <div class="mt-3 text-center d-flex flex-column gap-2">
          <%= render "devise/shared/links" %>         
      </div>

    </div>
</section>
 
</div>
